---
title: "p8105_HW2_rat2134"
author: "Robert Tumasian"
date: "9/28/2019"
output: github_document
---

```{r setup, include=FALSE}
#Load required packages
library(readxl)
library(janitor)
library(tidyverse)
library(dplyr)
```

# Problem 1
```{r}
#Import Mr. Trash Wheel dataset 
Mr_Trash_Data = 
  read_excel("./HW2_datasets/Mr_Trash_Wheel.xlsx",
             range = cell_cols("A:N")) %>%
  drop_na() %>%
  janitor::clean_names() %>%
  mutate(sports_balls = as.integer(
    round(sports_balls, 
          digits = 0)))
```

```{r}
#Import and clean precipitation data for 2017 and 2018
Precipitation_data_2017 =
  read_excel("./HW2_datasets/Mr_Trash_Wheel.xlsx",
             sheet = 4,
             cell_rows(3:14),
             col_names = c("Month", "Total_Precipitation")) %>%
  mutate(Year = 2017)

Precipitation_data_2018 =
  read_excel("./HW2_datasets/Mr_Trash_Wheel.xlsx",
             sheet = 3,
             cell_rows(3:9),
             col_names = c("Month", "Total_Precipitation")) %>%
  mutate(Year = 2018)

#Combine data sets
Precipitation_data_2017_and_2018 = 
  bind_rows(Precipitation_data_2017, Precipitation_data_2018) %>%
  mutate(Month = month.name[Month])
```

`Mr_Trash_Data` has `r dim(Mr_Trash_Data)[1]` observations and `r dim(Mr_Trash_Data)[2]` variables:

* Dumpster number
* Month
* Year
* Date of dumpster check (YYYY-MM-DD)
* Weight (in tons) and volume (in cubic yards) of trash in dumpster
* Quantity of plastic bottles, polystyrene, cigarette butts, glass bottles, grocery bags, chip bags, and sports balls found in the dumpster
* Number of homes powered (each ton of trash equates to on average 500 kilowatts of electricity, and an average household will use 30 kilowatts per day)

`Precipitation_data_2017_and_2018` has `r dim(Precipitation_data_2017_and_2018)[1]` observations and `r dim(Precipitation_data_2017_and_2018)[2]` variables:

* Month
* Total Precipitation (in inches)
* Year

With the data available, the total precipitation in 2018 was `r sum(pull(filter(Precipitation_data_2017_and_2018, Year == 2018), Total_Precipitation))` inches. In addition, the median number of sports balls found in the dumpsters in 2017 was `r median(pull(filter(Mr_Trash_Data, year == 2017), sports_balls))`.

# Problem 2
```{r, message=FALSE}
#Import and clean pols-month dataset
Pols_month = 
  read_csv("./HW2_datasets/fivethirtyeight_datasets/pols-month.csv") %>%
  separate(mon, into = c("year", "month", "day")) %>%
  mutate(month = month.name[as.factor(month)]) %>%
  #In addition to 0s and 1s in the prez_gop variable, there are also 2s
  #All 2s will be considered as and reassigned to 1s
  mutate(prez_gop = ifelse(prez_gop == 1 | prez_gop == 2, 1, 0)) %>%
  mutate(president = recode(prez_gop, `0` = "dem", `1` = "gop")) %>%
  select(-c(prez_dem, prez_gop, day))
```

```{r, message=FALSE}
#Import and clean snp dataset
snp =
  read_csv("./HW2_datasets/fivethirtyeight_datasets/snp.csv") %>%
  separate(date, into = c("month", "day", "year")) %>%
  arrange(year, month) %>%
  select(-day) %>%
  mutate(month = month.name[as.factor(month)]) %>%
  select(year, month, everything())
```

```{r, message=FALSE}
#Import and clean unemployment dataset
unemployment_data = 
  read_csv("./HW2_datasets/fivethirtyeight_datasets/unemployment.csv") %>%
  pivot_longer(
    Jan:Dec,
    names_to = "month",
    values_to = "unemployment_Rate"
  ) %>%
  rename(year = Year) %>%
  drop_na() %>%
  arrange(year, month) %>%
  mutate(month = month.name[as.factor(month)])
```
